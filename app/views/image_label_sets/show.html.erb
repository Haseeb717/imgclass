<p id="notice"><%= notice %></p>

<%= javascript_include_tag "bb" %>

<div class="container">

<script type="text/javascript">
  BoundingBoxesGroups = [];
</script>

<% @images.each do |image| %>
  <div class="row">
  <div class="col-sm-3"><%= File.basename image.url %><br><br>
  <% if @image_label_set.bounding_box_mode %>
  <script type="text/javascript">
    <%  image.image_labels.select{ |il| (not il.target.nil?) }.each do |il| %>
      var BoundingBoxes<%=image.id%>_<%=il.id%>=<%=raw(il.target)%>;
      var BoundingBoxInfo<%=image.id%>_<%=il.id%> = {};
      BoundingBoxInfo<%=image.id%>_<%=il.id%>["overlayElementId"] = "overlay<%=image.id%>";
      BoundingBoxInfo<%=image.id%>_<%=il.id%>["BoundingBoxes"] = BoundingBoxes<%=image.id%>_<%=il.id%>;
      BoundingBoxesGroups.push(BoundingBoxInfo<%=image.id%>_<%=il.id%>);
    <% end %>
  </script>
  <% else %>
    <%= image.most_likely_label_text %>
    <table class="table" >
      <tr><% @image_label_set.labels.each do |label| %>
        <td><b><%= label.text %></b></td>
      <% end %></tr>
      <tr><% @image_label_set.labels.each do |label| %>
        <td><%= image.count_labels(label) %></td>
      <% end %></tr>
    </table>
  <% end %>
  </div>
  <div class="col-sm-2">
    <img class="img-thumbnail" src="<%=image.url %>">
    <svg id="overlay<%=image.id%>" xmlns="http://www.w3.org/2000/svg" style="left:0px;top:0px;">
    </svg>
  </div>
  </div>
  <br><br>
<% end %>

<br><br><br><br>
<div class="row" id="pagination-links">
  <div class="col-sm-5"><%= paginate @images %></div>
</div>
</div>
